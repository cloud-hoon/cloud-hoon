<head><style>
iframe { 
	width: 48%;
	height: 90%;
}
body {
	margin: 0;
}
#text {
	height: 40px;
	float: left;
}
#btnX {
    float:left;
    height: 40px;
    margin-left: 5px;
    margin-right: 5px;
}
button {
    margin-left: 5px;
    margin-right: 5px;
}
</style>
<title>Dz</title>
</head>
<input type="search" size="10" autofocus id="text">
<input type="button" id="btnX" value="X" onclick="text.value='';text.focus()">
<input type="button" id="b1" value="buy" onclick="load(0,1, this.id)">
<input type="button" id="b2" value="q10Laz" onclick="load(2,3, this.id)">
<a target="_blank" href="dzSeller.htm">Seller (Desktop)</a>
<br/>
<div id="optionsDiv"></div>
<!--<select id="options" onchange="clickOption(this.value)"></select>-->
<iframe id="f1">
</iframe>

<iframe id="f2">
</iframe>


<script>
const links=[
// start from 0-4 don't delete and will spoil the sequences
"https://shopee.sg/search/?keyword=%s&page=0&sortBy=sales"
,"https://mobile.carousell.com/search/%s"
,"https://www.qoo10.sg/gmkt.inc/Mobile/Search/Default.aspx?keyword=%s&__ar=Y"
,"https://www.lazada.sg/catalog/?q=%s&_keyori=ss&from=input&spm=a2o42.home.search.go.654346b5ZwiEyX"
,"https://www.qoo10.sg/gmkt.inc/Bestsellers/?gender=Female"  // change to women
// start from 5-9
,"https://www.qoo10.sg/gmkt.inc/Bestsellers/?gender=Male" // change to men
,"*https://www.zalora.sg/women/just-for-you/" 
,"*https://www.zalora.sg/men/just-for-you/"
,"https://exchangemarketplace.com/shops?business_types=21"
,"http://xpareto.com/"

// 10
,"https://index.woorank.com/en/reviews?countries=SG"
,"*https://www.theaffiliategateway.sg/directory/category"
,"Amazon mover/shaker"

,"http://www.watchcount.com/?cc=SG&uqsrc=catl&uqkw=&uqcat=625#serp"
,"https://www.watsons.com.sg/c/bestSeller"
,"https://shopee.sg/user/purchase/"
,"https://keepa.com/#!search/1-%s"
]
const dropdownOptions={
	//"buy" : [0, 1]
	//,"q10Laz" : [2,3]
	"srcQ10Best" : [4,5]
	,"srcZaloraBest" : [6,7]
	,"srcSites" : [8,9]
}
createOptions(); 
function createOptions(){
	for(i in dropdownOptions){
		var opt=document.createElement("button");
		opt.id=i;
		opt.innerText=i;
		opt.onclick=function(){load(dropdownOptions[this.id][0], dropdownOptions[this.id][1], this.id)};
		optionsDiv.appendChild(opt);
	}
	
	
	//(consider if too many?)
	/*for(i in dropdownOptions){
		var opt=new Option(i)
		opt.id=i;
		options.add(opt)
	}
	*/
	
	
}
function clickOption(i){
	console.log(i);
}

lastAction="b1"
function load(l1,l2,id){
	finalL1 = links[l1].replace("%s",text.value.trim().replace(/%s/gi,"+"))
	if(finalL1.startsWith("*")){
		window.open(finalL1.substring(1));
	}else{
		f1.src=finalL1
	}
	finalL2=links[l2].replace("%s",text.value.trim().replace(/%s/gi,"+"))
	if(finalL2.startsWith("*")){
		window.open(finalL2.substring(1));
	}else{
	  	f2.src=finalL2;
	}
	lastAction=id;
	console.log("last action updated to:"+id);
}
var elem = document.getElementById('text');
elem.addEventListener('keypress', function(e){
  if (e.keyCode == 13) {
    console.log('lastAction '+lastAction+' will be pressed');   
    document.getElementById(lastAction).click()
  }
});
	
var s=prompt("Search?")
if(s){
	document.getElementById('text').value=(s);
	document.getElementById(lastAction).click();
}
</script>
