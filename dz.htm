<head><style>
iframe { 
	width: 48%;
	height: 90%;
}
body {
	margin: 0;
}
#text {
	height: 100%;
	width: 30%
}
#btnX {
   height: 100%;
   margin-left: 5px;
   margin-right: 5px;
}
.btnOptions {
    margin-left: 5px;
    height: 90%;
}
#framesDiv {
	white-space: nowrap;
	overflow-x: scroll;
}
#optionsDiv {
    background: grey;
    position: fixed;
    left: 0;
    right: 0;
    bottom: 50px;
    height: 50px;
    white-space: nowrap;
    overflow-x: scroll;
}  
#footer {
    background: darkgrey;
    position: fixed;
    left: 0;
    right: 0;
    bottom: 0;
    height: 50px;
    white-space: nowrap;
    overflow-x: scroll;
    z-index: 999;
}  
::-webkit-scrollbar {
    height: 2px;  /* remove scrollbar space */
    width: 0px;
    background: transparent;  /* optional: just make scrollbar invisible */
}
::-webkit-scrollbar-thumb {
    background: #FF0000;
}
</style>
<meta name="viewport" content="width=device-width, maximum-scale=0.5, initial-scale=0.5">
</head>
<div id="footer">
	<input type="search" size="10" autofocus id="text" onchange="document.title=this.value">
	<input type="button" id="btnX" value="X" onclick="text.value='';text.focus()">
	<select id="modesOptions" onchange="createOptions()">
		<option>Products
		<option>Car Meetup
		<option>Orders
		<option>Bills (if privatised)
		<option>Shops
		<option>Books
		<option>Merch
		<option>Marketing
		<option>Automation
		<option>Coaching</option> <!-- https://www.coach.me/open_coaching#/_=_ -->
	</select>
</div>
<div id="optionsDiv"></div>
<!--<div id="framesDiv">-->
	<iframe id="f1"></iframe>
	<iframe id="f2"></iframe>
	<iframe id="f3"></iframe>
	<iframe id="f4"></iframe>
<!--</div>-->


<script>

const links=[
// start from 0-4 don't delete and will spoil the sequences
"https://shopee.sg/search?keyword=%s&page=0&sortBy=sales"
,"https://mobile.carousell.com/search/%s"
,"https://www.qoo10.sg/gmkt.inc/Mobile/Search/Default.aspx?keyword=%s&__ar=Y"
,"https://www.lazada.sg/catalog/?q=%s&_keyori=ss&from=input&spm=a2o42.home.search.go.654346b5ZwiEyX"
,"https://www.qoo10.sg/gmkt.inc/Bestsellers/?gender=Female"  
// 5-9
,"https://www.qoo10.sg/gmkt.inc/Bestsellers/?gender=Male" 
,"*https://www.zalora.sg/women/just-for-you/" 
,"*https://www.zalora.sg/men/just-for-you/"
,"https://exchangemarketplace.com/shops?business_types=21"
,"http://xpareto.com/"

// 10 - 14
,"https://shopee.sg/shop/64472211/search/?page=0&sortBy=sales"
,"https://www.lazada.sg/minihelpers/?langFlag=en&q=All-Products&from=wangpu&pageTypeId=2"
,"https://www.qoo10.sg/shop/MiniHelperssg?search_mode=basic"

,"https://shopee.sg/shop/140266/search/?page=0&sortBy=sales"
,"https://www.lazada.sg/passion-gadgets/?langFlag=en&q=All-Products&from=wangpu&pageTypeId=2"

// 15 - 19
,"https://www.qoo10.sg/shop/PasssionGadgets?search_mode=basic"
,"*http://www.google.com.sg/search?q=shopee.com+%s"
,"*http://www.google.com.sg/search?q=lazada.com+%s"
,"*http://www.google.com.sg/search?q=qoo10.sg+%s"
,"*https://sg.carousell.com/inbox/"

// 20 - 24
,"https://shopee.sg/user/purchase/list/?type=7"
,"https://shopee.sg/user/purchase/"
,"https://www.qoo10.sg/gmkt.inc/My/OrderContractList.aspx"
,"https://docs.google.com/spreadsheets/d/1tMthV-SuOGieL2DikEePZhfaaa1LDoLnXNYFmwss4zw/edit"
,"https://sellercenter.lazada.sg/"

// 25 - 29
,"https://sellercenter.lazada.sg/im/window?isWindowOpen=true&version=1.0.6"
,"https://www.minifier.org/"
,"http://jsbeautifier.org/"
,"*https://www.facebook.com/marketplace/singapore/search?query=%s"
,"*https://sg.carousell.com/sell/"

// 30 - 34
,"https://merchinformer.com/merch-amazon-listings/"
,"https://sellercenter.lazada.sg/campaign#/"
,"https://www.facebook.com/marketplace/singapore/search?query=free&minPrice=0&maxPrice=0"
,"http://singapore.craigslist.com.sg/search/zip"
//,"http://www.watchcount.com/?cc=SG&uqsrc=catl&uqkw=&uqcat=625#serp"
//,"https://keepa.com/#!search/1-%s"



//,"https://www.watsons.com.sg/c/bestSeller"
//,"Amazon mover/shaker"
//,"https://index.woorank.com/en/reviews?countries=SG"
//,"*https://www.theaffiliategateway.sg/directory/category"
]

var dropdownOptions={}
dropdownOptions["Products"]={
	"buy" : [0, 1]
	,"q10Laz" : [2,3]
	,"all" : [0, 2, 1, 3]
	,"campaign": [31]
	,"srcQ10Best" : [4,5]
	,"srcZaloraBest" : [6,7]
	,"srcSites" : [8,9]
}
dropdownOptions["Car Meetup"]={
	"find free" : [32,33]
}
dropdownOptions["Orders"]={
	"orders" : [20,21,22,19]
	,"toShip" : [23,24,25]
	,"meetup" : [28,29]
}
dropdownOptions["Shops"]={
	"search Shops" : [16, 17, 18]
	,"minihelpers" : [10, 11,12]
	,"PasssionGadgets" : [13,14,15]	
	,"Bosch (Todo)" : [4,5]
	,"JML (todo, not in shopee)" : [6,7]
	,"srcSites" : [8,9]
}
dropdownOptions["Automation"]={
	"js mini+beau": [26,27]
}
dropdownOptions["Merch"]={
	"merchinformer" : [30]
}

createOptions(); 
function createOptions(){
	optionsDiv.innerHTML=""
	firstModeOption=""
	for(i in dropdownOptions[modesOptions.value]){
		var opt=document.createElement("button");
		opt.className="btnOptions"
		opt.id=i;
		if(!firstModeOption){ firstModeOption=i;}
		opt.innerText=i;
		opt.onclick=function(){load(this.id, dropdownOptions[modesOptions.value][this.id][0], 
			dropdownOptions[modesOptions.value][this.id][1], 
			dropdownOptions[modesOptions.value][this.id][2],
			dropdownOptions[modesOptions.value][this.id][3])
		};
		optionsDiv.appendChild(opt);
	}
	if(firstAction){
		lastAction=firstModeOption;
	}
}

// to auto search last on press, default to first
lastAction="buy"
function openInFrame(linkIndex,i){
	if(linkIndex==null){
		return;
	}
	
	finalLink = links[linkIndex].replace("%s",text.value.trim().replace(/%s/gi,"+"))
	if(finalLink.startsWith("*")){
		window.open(finalLink.substring(1));
	}else{
		document.getElementById("f"+i).src=finalLink
	}
}
function load(id,l1,l2,l3,l4){
	openInFrame(l1, 1);
	openInFrame(l2, 2);	
	openInFrame(l3, 3);
	openInFrame(l4, 4);
	lastAction=id;
	console.log("last action updated to:"+id);
}
var elem = document.getElementById('text');
elem.addEventListener('keypress', function(e){
  if (e.keyCode == 13) {
    console.log('lastAction '+lastAction+' will be pressed');   
    document.getElementById(lastAction).click()
  }
});
	
</script>
